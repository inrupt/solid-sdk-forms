{"code":"var _this = this;\r\nimport * as tslib_1 from \"tslib\";\r\nimport auth from 'solid-auth-client';\r\nimport data from '@solid/query-ldflex';\r\nexport var fetchSchema = function (file) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n    var schemaDocument, documentText, error_1;\r\n    return tslib_1.__generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 3, , 4]);\r\n                return [4 /*yield*/, auth.fetch(file, {\r\n                        headers: {\r\n                            'Content-Type': 'text/plain'\r\n                        }\r\n                    })];\r\n            case 1:\r\n                schemaDocument = _a.sent();\r\n                if (schemaDocument.status !== 200) {\r\n                    throw schemaDocument;\r\n                }\r\n                return [4 /*yield*/, schemaDocument.text()];\r\n            case 2:\r\n                documentText = _a.sent();\r\n                return [2 /*return*/, documentText.toString()];\r\n            case 3:\r\n                error_1 = _a.sent();\r\n                return [2 /*return*/, error_1];\r\n            case 4: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nexport var existDocument = function (documentUri) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n    return tslib_1.__generator(this, function (_a) {\r\n        return [2 /*return*/, auth.fetch(documentUri, {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })];\r\n    });\r\n}); };\r\nexport var createDocument = function (documentUri, body) {\r\n    if (body === void 0) { body = ''; }\r\n    return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n        var result;\r\n        return tslib_1.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, existDocument(documentUri)];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    if (result.status === 404) {\r\n                        return [2 /*return*/, auth.fetch(documentUri, {\r\n                                method: 'PATCH',\r\n                                headers: {\r\n                                    'Content-Type': 'application/sparql-update'\r\n                                },\r\n                                body: body\r\n                            })];\r\n                    }\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n};\r\nexport var fetchLdflexDocument = function (documentUri) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n    var result, document_1, error_2;\r\n    return tslib_1.__generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 4, , 5]);\r\n                if (!(documentUri && documentUri !== '')) return [3 /*break*/, 3];\r\n                return [4 /*yield*/, createDocument(documentUri)];\r\n            case 1:\r\n                result = _a.sent();\r\n                if (result.status !== 200) {\r\n                    throw result;\r\n                }\r\n                return [4 /*yield*/, data[documentUri.toString()]];\r\n            case 2:\r\n                document_1 = _a.sent();\r\n                return [2 /*return*/, document_1];\r\n            case 3: return [3 /*break*/, 5];\r\n            case 4:\r\n                error_2 = _a.sent();\r\n                return [2 /*return*/, error_2];\r\n            case 5: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nexport var getBasicPod = function (webId) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n    var nameData, imageData, name_1, image, e_1;\r\n    return tslib_1.__generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 4, , 5]);\r\n                if (!webId) return [3 /*break*/, 3];\r\n                return [4 /*yield*/, data[webId]['vcard:fn']];\r\n            case 1:\r\n                nameData = _a.sent();\r\n                return [4 /*yield*/, data[webId]['vcard:hasPhoto']];\r\n            case 2:\r\n                imageData = _a.sent();\r\n                name_1 = nameData ? nameData.value : webId;\r\n                image = imageData ? imageData.value : null;\r\n                return [2 /*return*/, { name: name_1, image: image, webId: webId }];\r\n            case 3: return [2 /*return*/, {}];\r\n            case 4:\r\n                e_1 = _a.sent();\r\n                throw e_1;\r\n            case 5: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\n//# sourceMappingURL=solid-fetch.js.map","references":["/Users/jairocampos/Public/janeiro/solid-sdk-forms/node_modules/@types/solid-auth-client/index.d.ts","/Users/jairocampos/Public/janeiro/solid-sdk-forms/node_modules/@solid/query-ldflex/lib/index.js"],"map":"{\"version\":3,\"file\":\"solid-fetch.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/utils/solid-fetch.ts\"],\"names\":[],\"mappings\":\"AAAA,iBAwFA;;AAxFA,OAAO,IAAI,MAAM,mBAAmB,CAAA;AACpC,OAAO,IAAI,MAAM,qBAAqB,CAAA;AAQtC,MAAM,CAAC,IAAM,WAAW,GAAG,UAAO,IAAiB;;;;;;gBAExB,qBAAM,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;wBAC5C,OAAO,EAAE;4BACP,cAAc,EAAE,YAAY;yBAC7B;qBACF,CAAC,EAAA;;gBAJI,cAAc,GAAG,SAIrB;gBAEF,IAAI,cAAc,CAAC,MAAM,KAAK,GAAG,EAAE;oBACjC,MAAM,cAAc,CAAA;iBACrB;gBAEoB,qBAAM,cAAc,CAAC,IAAI,EAAE,EAAA;;gBAA1C,YAAY,GAAG,SAA2B;gBAEhD,sBAAO,YAAY,CAAC,QAAQ,EAAE,EAAA;;;gBAE9B,sBAAO,OAAK,EAAA;;;;KAEf,CAAA;AAED,MAAM,CAAC,IAAM,aAAa,GAAG,UAAO,WAAwB;;QAC1D,sBAAO,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;gBAC7B,OAAO,EAAE;oBACP,cAAc,EAAE,kBAAkB;iBACnC;aACF,CAAC,EAAA;;KACH,CAAA;AAED,MAAM,CAAC,IAAM,cAAc,GAAG,UAC5B,WAAwB,EACxB,IAAiB;IAAjB,qBAAA,EAAA,SAAiB;;;;;wBAEF,qBAAM,aAAa,CAAC,WAAW,CAAC,EAAA;;oBAAzC,MAAM,GAAG,SAAgC;oBAE/C,IAAI,MAAM,CAAC,MAAM,KAAK,GAAG,EAAE;wBACzB,sBAAO,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;gCAC7B,MAAM,EAAE,OAAO;gCACf,OAAO,EAAE;oCACP,cAAc,EAAE,2BAA2B;iCAC5C;gCACD,IAAI,MAAA;6BACL,CAAC,EAAA;qBACH;oBAED,sBAAO,MAAM,EAAA;;;;CACd,CAAA;AAED,MAAM,CAAC,IAAM,mBAAmB,GAAG,UAAO,WAAwB;;;;;;qBAE1D,CAAA,WAAW,IAAI,WAAW,KAAK,EAAE,CAAA,EAAjC,wBAAiC;gBACpB,qBAAM,cAAc,CAAC,WAAW,CAAC,EAAA;;gBAA1C,MAAM,GAAG,SAAiC;gBAEhD,IAAI,MAAM,CAAC,MAAM,KAAK,GAAG,EAAE;oBACzB,MAAM,MAAM,CAAA;iBACb;gBAEgB,qBAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,EAAA;;gBAA7C,aAAW,SAAkC;gBAEnD,sBAAO,UAAQ,EAAA;;;;gBAGjB,sBAAO,OAAK,EAAA;;;;KAEf,CAAA;AAED,MAAM,CAAC,IAAM,WAAW,GAAG,UAAO,KAAa;;;;;;qBAEvC,KAAK,EAAL,wBAAK;gBACU,qBAAM,IAAI,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,EAAA;;gBAAxC,QAAQ,GAAG,SAA6B;gBAC5B,qBAAM,IAAI,CAAC,KAAK,CAAC,CAAC,gBAAgB,CAAC,EAAA;;gBAA/C,SAAS,GAAG,SAAmC;gBAC/C,SAAO,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAA;gBACxC,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAA;gBAChD,sBAAO,EAAE,IAAI,QAAA,EAAE,KAAK,OAAA,EAAE,KAAK,OAAA,EAAE,EAAA;oBAE/B,sBAAO,EAAE,EAAA;;;gBAET,MAAM,GAAC,CAAA;;;;KAEV,CAAA\"}","dts":{"name":"/Users/jairocampos/Public/janeiro/solid-sdk-forms/dist/types/utils/solid-fetch.d.ts","writeByteOrderMark":false,"text":"interface FetchRequest {\r\n    status: number;\r\n    ok: boolean;\r\n    body: ReadableStream<Uint8Array> | null;\r\n}\r\nexport declare const fetchSchema: (file: RequestInfo) => Promise<any>;\r\nexport declare const existDocument: (documentUri: RequestInfo) => Promise<FetchRequest>;\r\nexport declare const createDocument: (documentUri: RequestInfo, body?: string) => Promise<FetchRequest>;\r\nexport declare const fetchLdflexDocument: (documentUri: RequestInfo) => Promise<any>;\r\nexport declare const getBasicPod: (webId: string) => Promise<{\r\n    name: any;\r\n    image: any;\r\n    webId: string;\r\n} | {\r\n    name?: undefined;\r\n    image?: undefined;\r\n    webId?: undefined;\r\n}>;\r\nexport {};\r\n"}}
